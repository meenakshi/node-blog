/*
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.

Copyright 2010 Lars Corneliussen, Benjamin "balupton" Lupton
Site: http://startbigthinksmall.wordpress.com/2009/05/28/beautyofcode-jquery-plugin-for-syntax-highlighter-2-0-by-alex-gorbatchev/
Source: https://bitbucket.org/larscorneliussen/beautyofcode/
Source: https://bitbucket.org/balupton/beautyofcode

Version: 1.0-SNAPSHOT
*/
jQuery.beautyOfCode={settings:{autoLoad:true,baseUrl:"http://alexgorbatchev.com.s3.amazonaws.com/pub/sh/2.1.364/",scripts:"scripts/",styles:"styles/",theme:"Default",brushes:["Xml","JScript","CSharp","Plain"],config:{},defaults:{},ready:function(){jQuery.beautyOfCode.beautifyAll()}},init:function(a){a=jQuery.extend({},jQuery.beautyOfCode.settings,a);if(!a.config.clipboardSwf)a.config.clipboardSwf=a.baseUrl+a.scripts+"clipboard.swf";jQuery(document).ready(function(){if(a.autoLoad){jQuery.beautyOfCode.utils.loadCss(a.baseUrl+
a.styles+"shCore.css");jQuery.beautyOfCode.utils.loadCss(a.baseUrl+a.styles+"shTheme"+a.theme+".css","shTheme");var b=[];b.push(a.baseUrl+a.scripts+"shCore.js");jQuery.each(a.brushes,function(c,d){b.push(a.baseUrl+a.scripts+"shBrush"+d+".js")});jQuery.beautyOfCode.utils.loadAllScripts(b,function(){a&&a.config&&jQuery.extend(SyntaxHighlighter.config,a.config);a&&a.defaults&&jQuery.extend(SyntaxHighlighter.defaults,a.defaults);a.ready()})}else a.ready()})},beautifyAll:function(){jQuery("pre.code:has(code[class]),code.code").beautifyCode()},
utils:{loadScript:function(a,b){jQuery.ajax({url:a,complete:function(){b()},type:"GET",dataType:"script",cache:true})},loadAllScripts:function(a,b){!a||a.length==0?b():jQuery.beautyOfCode.utils.loadScript(a[0],function(){jQuery.beautyOfCode.utils.loadAllScripts(a.slice(1,a.length),b)})},loadCss:function(a,b){var c=jQuery("head")[0];if(a&&c){var d=document.createElement("link");d.setAttribute("rel","stylesheet");d.setAttribute("href",a);if(b)d.id=b;c.appendChild(d)}},addCss:function(a,b){var c=jQuery("head")[0];
if(a&&c){var d=document.createElement("style");d.setAttribute("type","text/css");if(b)d.id=b;if(d.styleSheet)d.styleSheet.cssText=a;else jQuery(d).text(a);c.appendChild(d)}},addCssForBrush:function(a,b){if(!a.isCssInitialized){jQuery.beautyOfCode.utils.addCss(b.Style);a.isCssInitialized=true}},parseParams:function(a){var b=jQuery.map(a,jQuery.trim),c={},d=function(e,f){e=new RegExp("^"+e+"\\[([^\\]]+)\\]$","gi");for(var g=null,h=0;h<f.length;h++)if((g=e.exec(f[h]))!=null)return g[1];return null};
a=function(e){var f=d("boc-"+e,b);if(f)c[e]=f};a("class-name");a("first-line");a("tab-size");if(a=d("boc-highlight",b))c.highlight=jQuery.map(a.split(","),jQuery.trim);a=function(e){if(jQuery.inArray("boc-"+e,b)!=-1)c[e]=true;else if(jQuery.inArray("boc-no-"+e,b)!=-1)c[e]=false};a("smart-tabs");a("ruler");a("gutter");a("toolbar");a("collapse");a("auto-links");a("light");a("wrap-lines");a("html-script");return c}}};
jQuery.fn.beautifyCode=function(a,b){this.each(function(c,d){c=jQuery(d);var e=c.is("code")?c:c.children("code"),f=e[0].className.replace(/.+?(brush:|language-)/,"$1").replace("language-","").split(" "),g=g?g:f[0];f=jQuery.beautyOfCode.utils.parseParams(f);f=jQuery.extend({},SyntaxHighlighter.defaults,b,f);if(f["html-script"]=="true")highlighter=new SyntaxHighlighter.HtmlScript(g);else if(g=SyntaxHighlighter.utils.findBrush(g))highlighter=new g;else return;jQuery.beautyOfCode.utils.addCssForBrush(g,
highlighter);if(c.is("pre")&&(e=c.children("code")))c.text(e.text());highlighter.highlight(c.html(),f);highlighter.source=d;c.replaceWith(highlighter.div)})};